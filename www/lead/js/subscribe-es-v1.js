"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var SubscribeEsputnik=function(){function n(t){_classCallCheck(this,n),this.leadData=new FormData,this.leadFields=t,this.getUrlParams(),this.getCookieParams()}return _createClass(n,[{key:"sendToApi",value:function(t){var e=new XMLHttpRequest;e.open("POST","https://masterplayer.space/v1/esputnik-lead/"),e.onreadystatechange=function(){"function"==typeof t&&e.readyState===XMLHttpRequest.DONE&&t(e)},e.send(this.leadData)}},{key:"getUrlParams",value:function(){try{var t=new URL(window.location.href).searchParams;t.get("utm_source")&&t.get("utm_source").length&&(this.leadFields={utm_source:t.get("utm_source")}),t.get("utm_campaign")&&t.get("utm_campaign").length?this.leadFields={utm_campaign:t.get("utm_campaign")}:t.get("gclid")&&t.get("gclid").length&&(this.leadFields={utm_campaign:t.get("utm_campaign")}),t.get("utm_term")&&t.get("utm_term").length&&(this.leadFields={utm_term:t.get("utm_term")}),t.get("utm_medium")&&t.get("utm_medium").length&&(this.leadFields={utm_medium:t.get("utm_medium")});var e=n.getGACookie();t.get("utm_content")&&t.get("utm_content").length?this.leadFields={utm_content:t.get("utm_content")}:e&&e.length&&(this.leadFields={utm_content:e}),t.get("utm_promo")&&t.get("utm_promo").length&&(this.leadFields={utm_promo:t.get("utm_promo")})}catch(t){throw new Error(t)}}},{key:"getCookieParams",value:function(){this.leadFields={utm_source:n.getCookie("source")},this.leadFields={utm_campaign:n.getCookie("campaign")},this.leadFields={utm_medium:n.getCookie("promo")},this.leadFields={utm_term:n.getCookie("tid1")},this.leadFields={utm_content:n.getCookie("tid2")}}},{key:"leadFields",get:function(){return this.leadData},set:function(t){"object"===_typeof(t)&&("account"in t&&String(t.account).length&&this.leadData.set("account",String(t.account)),"name"in t&&String(t.name).length&&(this.leadData.name=String(t.name),this.leadData.set("name",String(t.name))),"email"in t&&String(t.email).length&&this.leadData.set("email",String(t.email)),"phone"in t&&String(t.phone).length&&this.leadData.set("phone",String(t.phone)),"site"in t&&String(t.site).length&&this.leadData.set("site",String(t.site)),"country"in t&&String(t.country).length&&this.leadData.set("country",String(t.country)),"country_phone_code"in t&&String(t.country_phone_code).length&&this.leadData.set("country_phone_code",String(t.country_phone_code)),"amount"in t&&String(t.amount).length&&this.leadData.set("amount",String(t.amount)),"term"in t&&String(t.term).length&&this.leadData.set("term",String(t.term)),"utm_source"in t&&String(t.utm_source).length&&this.leadData.set("utm_source",String(t.utm_source)),"utm_campaign"in t&&String(t.utm_campaign).length&&this.leadData.set("utm_campaign",String(t.utm_campaign)),"utm_term"in t&&String(t.utm_term).length&&this.leadData.set("utm_term",String(t.utm_term)),"utm_medium"in t&&String(t.utm_medium).length&&this.leadData.set("utm_medium",String(t.utm_medium)),"utm_content"in t&&String(t.utm_content).length&&this.leadData.set("utm_content",String(t.utm_content)),"utm_promo"in t&&String(t.utm_promo).length&&this.leadData.set("utm_promo",String(t.utm_promo)),"event"in t&&String(t.event).length&&this.leadData.set("event",String(t.event)),"group"in t&&String(t.group).length&&this.leadData.set("group",String(t.group)))}}],[{key:"getGACookie",value:function(){var t=document.cookie.match("(?:^|;)\\s*_ga=([^;]*)"),e=t?decodeURIComponent(t[1]):null;e&&(t=e.match(/(\d+\.\d+)$/));var n=t?t[1]:null;return n||!1}},{key:"getCookie",value:function(t){for(var e="sd_".concat(t,"="),n=document.cookie.split(";"),i=0;i<n.length;i+=1){for(var a=n[i];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return""}}]),n}();